# TestAsyncAwait

### Тезисы
1. Коду после **await** передается управление как функции обратного вызова (callback). Можно провести аналогию с [ContinueWith](https://docs.microsoft.com/ru-ru/dotnet/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks)
2. Результатом применения **await** к методу будет запуск задачи на выполнение (мы получим либо объект Task, если задача еще не выполнилась, либо конкретное значение, если задача успела выполниться). При запуске задачи и на время ее выполнение управление передается в вызывающий метод (на уровень выше).
3. Callback не обязательно должен выполняться в исходном вызываемом потоке, за это отвечает ConfigureAwait:
> Когда async-функция возобновляет выполнение после await, в каком потоке она это делает? Ну вообще-то это не обязательно исходный поток, в котором она начинала свой await (этот поток вообще может уже завершиться!). Но есть важный частный случай: если у нас графическое приложение, и await начинался в UI-потоке, то продолжаться будет тоже в нём (за это отвечает тот самый контекст выполнения). Обычно это важно, т. к. доступ к UI-элементам возможен только в UI-потоке. Также есть и другие ситуации, когда вам хотелось бы вернуться после await в тот же поток, в котором вы начинали await. Если вам всё равно, где будет происходить выполнение продолжения задания, то вы можете воспользоваться ConfigureAwait(false), чтобы сообщить об этом фреймворку и немного облегчить ему задачу. Вот и всё. Он может этим воспользоваться, и перекинуть хвост задания на пул потоков. А может и не воспользоваться, его право.
4. Блокировка ресурсов избегается путем возвращения управления вызываемому объекту
5. **await** извлекает результат из задачи
6. При работе с асинхронностью оперируют задачами
7. Один поток может выполнять несколько задач
8. Планировщик дает задачу на выполнение одному из потоков пула
9. **await** производит неблокирующее ожидание - отпускает поток
10. При работе с web-приложениями важен тот момент, что **await** позволяет отпускать поток для обработки других запросов

### Источники
1. https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/concepts/async/
2. http://sergeyteplyakov.blogspot.com/2010/12/c-5.html
3. https://habr.com/ru/company/nix/blog/260745/
4. https://habr.com/ru/post/261649/
5. https://habr.com/ru/post/470830/
6. https://ru.stackoverflow.com/a/491783/205187
